<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        <title>calculator app</title>
        <link rel ="stylesheet" href="style.css">
        <link rel ="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    </head>
    <body>

        <div class = "calculator">
            <div class = "display">0</div>
            <div class="topRow">
                <button class = "backBtn"> <i class="fa-solid fa-delete-left"></i> </button>
            </div>
            <div class="row">
                <button class = "clearBtn">C</button>
                <button class = "operatorBtn" data-action = "divide">/</button>
            </div>
            <div class="row">
                <button class="numberBtn">7</button>
                <button class="numberBtn">8</button>
                <button class="numberBtn">9</button>
                <button class = "operatorBtn" data-action = "multiply">x</button>
            </div>
            <div class="row">
                <button class="numberBtn">4</button>
                <button class="numberBtn">5</button>
                <button class="numberBtn">6</button>
                <button class = "operatorBtn" data-action = "subtract">-</button>
            </div>
            <div class="row">
                <button class="numberBtn">1</button>
                <button class="numberBtn">2</button>
                <button class="numberBtn">3</button>
                <button class = "operatorBtn" data-action = "add">+</button>
            </div>
            <div class="row">
                <button class="numberBtn">0</button>
                <!-- <button class="numberBtn">.</button> -->
                <button class="resultBtn">=</button>
            </div>
        </div>

        <script>

            let result = 0;
            let firstNumber = 0;
            let secondNumber = 0;
            let currentOperator;
            let lastBtnPressed;

            let memory = [];


            const display = document.querySelector('.display');
            const buttons = document.querySelectorAll('button');

            
            const populateDisplay = function populateDisplay(){
                console.log(memory);
                if (this.classList.contains('clearBtn')){
                    display.textContent = '0';  
                    memory = []; 
                    return
                }
                else if (this.classList.contains('numberBtn')){
                        if (lastBtnPressed === 'operatorBtn'){
                            display.textContent = '';
                        }
                        if (display.textContent === '0'){
                            display.textContent = `${this.textContent}`;
                        }
                        else {
                            if (display.textContent.length <= 21){
                                display.textContent += this.textContent;
                            }                     
                        }
                        firstNumber = display.textContent;
                        secondNumber = display.textContent;
                     }
                else if (this.classList.contains('operatorBtn')){
                    memory.push(firstNumber);
                    currentOperator = `${this.dataset.action}`;
                    memory.push(currentOperator);
                }
                else if (this.classList.contains('resultBtn')){
                    if (lastBtnPressed === 'resultBtn'){
                        return
                    }
                    memory.push(secondNumber);
                    result = operate(memory[0], memory[1], memory[2]);
                    memory.push(result);
                    display.textContent = result;
                }
                memory.splice(-0, memory.length - 4);
                lastBtnPressed = this.className;

            }

            function add(a, b){
                return parseInt(a) + parseInt(b);
            }

            function subtract(a, b){
                return a - b;
            }

            function multiply(a, b){
                return a * b;
            }

            function divide(a, b){
                return a / b;
            }

            function operate(firstNumber, operator, secondNumber){

                if (operator === 'add'){
                    return add(firstNumber, secondNumber);
                }
                if (operator === 'subtract'){
                    return subtract(firstNumber, secondNumber);
                }
                if (operator === 'multiply'){
                    return multiply(firstNumber, secondNumber);
                }
                if (operator === 'divide'){
                    return divide(firstNumber, secondNumber);
                }
            }

            buttons.forEach((button) => button.addEventListener('click', populateDisplay));
        </script>
    </body>
</html>